---
description: A hands-on training workshop by Mediacurrent
---

# Decoupled Drupal with Gatsby

## About Mediacurrent

[Mediacurrent](https://mediacurrent.com) is your single source digital partner for development, design, strategy, and training. We also offer ongoing Drupal support options. The quality of our work allows organizations to grow while saving significant money over time.

## Getting Started

This repo will allow you to get the codebase to build a new Gatsby website which has been configured to pull its content from Drupal.

## Requirements

### Operating System

* macOS 10.13 or later
* Windows 10 Pro+ or equivalent \(eg Windows 10 Enterprise\) with Hyper-V running
* Linux with kernel version 4.x or higher

### Software

* Docker - [macOS](https://docs.docker.com/docker-for-mac/install/) or [Windows 10](https://docs.docker.com/docker-for-windows/install/)
* Lando - [macOs](https://docs.lando.dev/basics/installation.html#macos) or [Windows 10](https://medium.com/@jiles/installing-lando-docker-and-composer-on-a-windows-10-pro-environment-e405efba2c96)
* NVM, NodeJS & NPM.  Install on [macOS](https://medium.com/@jamesauble/install-nvm-on-mac-with-brew-adb921fb92cc) or [Windows 10](https://codeburst.io/nvm-for-windows-how-to-install-and-use-13b7a4209791).

### Other

* Code Editor such as VSCode, Sublime Text, PHP Storm, etc.

## 1. Clone the repo

Clone the repo below anywhere in your computer.

```text
git clone https://github.com/mediacurrent/decoupled-drupal.git
```

## 2. Install Gatsby CLI

Before you can run gatsby commands like `gatsby develop`, you need to install the Gatsby CLI globally.

* Open your command line tool like Terminal \(macOs\), or PowerShell \(Windows\) and run the following command:

  ```text
  npm install -g gatsby-cli
  ```

## 3. Build the environment

* After cloning the repo, cd into the newly created directory:

**NOTE**: _This is the default directory generated by cloning the repo. If you changed the directory name when cloning the repo, cd into that directory instead_.

```text
cd decoupled-drupal
```

### Start Gatsby

_Since Gatsby pulls data from Drupal, Drupal needs to be running before Gatsby starts_

### Confirm Drupal is running

Visit [https://dev.nitflex.pantheon.io](https://dev.nitflex.pantheon.io)

_You should see a drupal website with movie-related content.  If this is the case, proceed to next steps, otherwise let your instructor know Drupal is not responding._

### Setup NodeJS and its dependencies

* From the directory where the repo was cloned (i.e. `decoupled-drupal`), run the following commands:

```text
nvm install

nvm use
```

_The commands above will setup the version of node specified inside `.nvmrc`.  This ensures everyone is using the same node version._


```text
npm install
```

_This will install all of Gatsby/Node dependencies found in package.json_.


```text
npm run start
```

_This will start Gatsby which should immediately connect to Drupal to pull all content_.

## 4. Access your Gatsby and Drupal sites

### Gatsby

[http://localhost:8000/](http://localhost:8000/)

### GraphQL

[http://localhost:8000/\_\_\_graphql](http://localhost:8000/___graphql)

### Drupal:

[https://dev.nitflex.pantheon.io](https://dev.nitflex.pantheon.io)

## Login to Drupal: \(switch to http if https is not working\)

[https://dev.nitflex.pantheon.io/user/login](https://dev.nitflex.pantheon.io/user/login)

Your credentials are: username: `admin`, password: `admin`
